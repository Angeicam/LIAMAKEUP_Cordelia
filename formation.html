<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LIAMAKEUP - Formations</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --topbar-height:44px;
      --header-height:64px;
      --accent:#D4AF37;
      --brand-bg:#5C4033;
      --muted-bg:#f5f5dc;
      --text:#333;
      --btn-radius:28px;
      --vh:1vh;

      --title-brown:#2f1f18;
      --card-bg:#f8efe6;
      --card-banner-d1:#c8ad85;
      --card-banner-d2:#b28f5d;
      --icon-color:#D4AF37;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:var(--muted-bg);
      color:var(--text);
      line-height:1.5;
      padding-top: calc(var(--topbar-height) + var(--header-height));
      -webkit-font-smoothing:antialiased;
    }

    /* Topbar */
    .topbar{
      position:fixed;
      top:0; left:0; right:0;
      height:var(--topbar-height);
      background:#2c1e18;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 4vw;
      z-index:140;
      font-size:.95rem;
    }
    .topbar a{ color:var(--accent); text-decoration:none; display:flex; gap:8px; align-items:center }
    .tb-left,.tb-right{ display:flex; gap:8px; align-items:center; }

    /* Header */
    header{
      position:fixed;
      top:var(--topbar-height);
      left:0; right:0;
      height:var(--header-height);
      background:var(--brand-bg);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 4vw;
      z-index:141;
      box-shadow:0 4px 10px rgba(0,0,0,.12);
    }
    .logo{display:flex; align-items:center; gap:12px; color:var(--accent); font-weight:700; cursor:pointer}
    .logo img{height:44px; display:block}

    .nav-wrap{display:flex; align-items:center; gap:12px}
    nav{display:flex; gap:8px; align-items:center}
    nav a{ color:#fff; text-decoration:none; font-weight:600; padding:8px 10px; border-radius:8px; font-size:.95rem; display:inline-flex; align-items:center; justify-content:center; transition:all .18s ease; gap:8px; }
    nav a:hover{ color:var(--brand-bg); background:var(--accent) }
    nav a.active{ background:var(--accent); color:var(--brand-bg); pointer-events:none; box-shadow: 0 6px 14px rgba(92,64,51,0.12); }

    .nav-toggle{ display:none; background:transparent; border:0; color:#fff; font-size:1.25rem; padding:8px; border-radius:8px; }

    /* MOBILE PANEL */
    nav.open{
      display:flex !important;
      position:fixed;
      top:calc(var(--topbar-height) + var(--header-height));
      right:0;
      height:calc(100vh - var(--topbar-height) - var(--header-height));
      width:84%;
      max-width:360px;
      padding:18px;
      background:#fff;
      color:#333;
      box-shadow:-8px 0 24px rgba(0,0,0,.12);
      flex-direction:column;
      gap:8px;
      z-index:146;
      overflow:auto;
      transform:translateX(0);
      transition:transform .28s ease;
    }
    nav.open a{
      color:#333;
      background:transparent;
      border-radius:8px;
      padding:12px 14px;
      text-align:center;
      font-weight:700;
      display:flex;
      align-items:center;
      gap:8px;
      justify-content:center;
    }
    nav.open a.active{
      background: linear-gradient(90deg, rgba(212,175,55,0.14), rgba(212,175,55,0.06));
      color:var(--brand-bg);
      border-left:4px solid rgba(212,175,55,0.95);
      padding-left:10px;
      font-weight:700;
      box-shadow: none;
    }

    @media (max-width:768px) {
      .nav-toggle{ display:inline-flex; }
      #mainNav{ display:none; }
    }

    /* HERO - full width breakout so image covers entire viewport width */
    .hero{
      height:50vh; /* same as ton exemple */
      width:100vw; /* force full viewport width */
      position:relative;
      left:50%;
      right:50%;
      margin-left:calc(-50vw + 0px); /* break out of centered container */
      margin-right:calc(-50vw + 0px);
      background-image:url('formalite_1.png'); /* ton image */
      background-position:center 40%;
      background-size:cover;
      background-repeat:no-repeat;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      color:#fff;
      margin-bottom:14px;
      z-index:1;
    }
    .hero::after {content:""; position:absolute; inset:0; background:rgba(0,0,0,0.4);} /* overlay 0.4 */
    .hero-content {position:relative; z-index:2; max-width:800px; padding:0 4vw;}
    .hero-content h1 { font-size:clamp(2rem,4vw,48px); color:var(--accent); margin-bottom:12px; font-weight:700; }
    .hero-content p  { font-size:clamp(1rem,2.2vw,20px); margin-bottom:12px; font-weight:500; color:#fff; }

    .section-title{
      display:block;
      margin:18px auto 6px;
      text-align:center;
      color:var(--brand-bg);
      font-weight:700;
      font-size:1.2rem;
      width:fit-content;
    }
    .section-title::after{ content:""; display:block; width:60px; height:4px; background:var(--accent); margin:8px auto 0; border-radius:2px; }

    /* Grid */
    .formations{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:28px;
      padding:8px 4vw 60px;
      max-width:1200px;
      margin:0 auto;
    }

    /* Card */
    .formation-card{
      background: linear-gradient(180deg, var(--card-bg), #fff);
      border: 2px solid rgba(212,175,55,0.95);
      border-radius: 14px;
      box-shadow: 0 8px 22px rgba(92,64,51,0.06);
      overflow: hidden;
      display:flex;
      flex-direction:column;
      transition: transform .22s cubic-bezier(.2,.9,.3,1), box-shadow .22s ease;
      cursor: pointer;
      position:relative;
      align-items:center;
      text-align:center;
      padding-bottom:14px;
    }
    .formation-card:hover{
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(92,64,51,0.12);
    }

    /* Banner */
    .formation-banner{
      width:100%;
      height:120px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-bottom: 1px solid rgba(92,64,51,0.06);
      position:relative;
      background: linear-gradient(135deg, var(--card-banner-d1), var(--card-banner-d2));
      overflow:visible;
      padding-top:8px;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }

    /* Icon: absolute and higher so it stays inside the card */
    .banner-icon {
      position: absolute;
      top: 8px;
      left: 50%;
      transform: translateX(-50%);
      width:64px;
      height:64px;
      border-radius:50%;
      background: var(--title-brown);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      border: 3px solid rgba(255,255,255,0.06);
      z-index:12;
    }
    .banner-icon i{
      color:var(--icon-color);
      font-size:28px;
    }

    /* Title ribbon */
    .formation-title {
      margin: -36px auto 12px;
      padding: 12px 18px;
      background: var(--title-brown);
      border: 2px solid var(--accent);
      color: #fff;
      font-size:1.02rem;
      font-weight:800;
      text-align:center;
      border-radius:10px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.12);
      width: fit-content;
      max-width:86%;
      line-height:1.05;
      position:relative;
      z-index:10;
    }

    /* Body */
    .formation-body{
      padding:16px 18px 20px;
      color:#333;
      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:center;
      text-align:center;
      margin-top:6px;
      width:100%;
    }

    .formation-meta {
      display:flex;
      flex-direction:column;
      gap:6px;
      align-items:center;
      justify-content:center;
      color:#444;
      font-size:0.95rem;
    }
    .formation-meta .location { font-weight:800; font-size:1rem; color:var(--brand-bg); }
    .formation-meta .date { font-weight:600; font-size:0.95rem; color:#444; display:flex; gap:8px; align-items:center; }
    .formation-meta .date i { color: rgba(92,64,51,0.9); font-size:0.95rem; }

    .formation-desc{
      color:#4a3f3a;
      font-size:0.95rem;
      line-height:1.45;
      margin-top:6px;
      min-height:56px;
      max-width:86%;
    }

    /* prices */
    .prices{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:center;
      margin-top:8px;
      flex-wrap:wrap;
    }
    .price{
      color:var(--accent);
      font-weight:900;
      font-size:1.18rem;
      padding:6px 12px;
      border-radius:10px;
      background: rgba(212,175,55,0.06);
      box-shadow: 0 6px 18px rgba(92,64,51,0.04);
    }
    .old-price{
      text-decoration:line-through;
      color:#777;
      font-size:0.95rem;
    }

    .formation-cta{
      margin-top:12px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      width:100%;
    }
    .formation-cta a.btn{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:10px 18px;
      border-radius:26px;
      background:var(--accent);
      color:var(--brand-bg);
      font-weight:700;
      text-decoration:none;
    }
    .formation-cta a.btn i{ font-size:1.02rem; }
    .formation-cta a.btn:hover{ transform: translateY(-2px); }

    /* Promo: red pill */
    .formation-card .ribbon{
      position:absolute;
      top:12px;
      right:12px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      height:28px;
      padding:6px 10px;
      background: linear-gradient(180deg,#ff6b6b,#d83b3b);
      color:#fff;
      font-weight:700;
      border-radius:18px;
      font-size:0.82rem;
      box-shadow: 0 6px 14px rgba(0,0,0,0.10);
      z-index:30;
      pointer-events:none;
    }
    .formation-card .ribbon i{ font-size:0.9rem; color:#fff; }

    @media (max-width:900px){
      .formations{ gap:18px; }
      .formation-title{ font-size:1rem; margin:-34px auto 12px; }
      .banner-icon{ width:56px; height:56px; left:50%; top:8px; transform:translateX(-50%); }
      .banner-icon i{ font-size:24px; }
      .formation-card .ribbon{ top:10px; right:10px; height:26px; padding:5px 9px; font-size:0.78rem; border-radius:16px; }
    }
    @media (max-width:560px){
      .formation-banner{ height:100px; }
      .formation-title{ margin:-30px auto 10px; padding:10px 14px; }
      .formation-card .ribbon{ right:10px; top:8px; font-size:0.72rem; }
      .price{ font-size:1.02rem; }
      .formation-desc{ min-height:44px; }
      .banner-icon{ width:48px; height:48px; left:50%; top:6px; transform:translateX(-50%); border-width:2px; }
      .banner-icon i{ font-size:20px; }
    }

    /* Modal / Footer */
    .modal { display:none; position:fixed; z-index:1000; left:0; top:0; right:0; bottom:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; padding:20px; }
    .modal.show { display:flex; }
    .modal-content{ position:relative; width:100%; max-width:560px; border-radius:14px; overflow:hidden; background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.03)); color:#fff; z-index:1001; box-shadow:0 12px 40px rgba(0,0,0,0.5); }
    .modal-content .bg{ position:absolute; inset:0; background-image:url('Maquillage_12.png'); background-size:cover; background-position:center; filter:brightness(.45); z-index:0; }
    .modal-content>*{ position:relative; z-index:1; padding:18px 22px; }
    .close{ position:absolute; top:10px; right:14px; font-size:26px; cursor:pointer; color:#fff; z-index:1002; }
    footer{ background:#2c1e18; color:#fff; text-align:center; padding:24px 4vw; margin-top:30px;}
    footer h3{ color: var(--accent); margin-bottom:8px; }
    .site-social a{ margin:0 6px; text-decoration:none; color:inherit; }

    a,button{-webkit-tap-highlight-color:rgba(0,0,0,0.06)}
    .show-focus-outline :focus { outline: 3px solid rgba(212,175,55,0.25); outline-offset:3px; }
  </style>
</head>
<body>
  <!-- Topbar -->
  <div class="topbar" role="banner">
    <div class="tb-left">
      <a href="tel:+2250777867309" aria-label="Appeler LIAMAKEUP">
        <i class="fas fa-phone" aria-hidden="true"></i>
        <span class="tb-text">+225 07 77 86 73 09</span>
      </a>
    </div>
    <div class="tb-right">
      <a href="#contact" aria-label="Localisation de LIAMAKEUP">
        <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
        <span class="tb-text">Yamoussoukro</span>
      </a>
    </div>
  </div>

  <!-- Header -->
  <header role="navigation">
    <div class="logo" onclick="location.href='index.html'">
      <img src="logo_liamakeup_1.png" alt="LIAMAKEUP logo">
      <span>LIAMAKEUP</span>
    </div>
    <div class="nav-wrap">
      <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="mainNav" aria-label="Ouvrir le menu">
        <i class="fas fa-bars" aria-hidden="true"></i>
      </button>

      <!-- Nav : plain text -->
      <nav id="mainNav" aria-label="Menu principal">
        <a href="index.html">Accueil</a>
        <a href="formation.html" class="active" aria-current="page">Formations</a>
        <a href="produits.html">Produits</a>
        <a href="propos.html">À propos</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" role="region" aria-label="Bannière formations">
    <div class="hero-content">
      <h1>Formations</h1>
      <p>Formations, produits et coaching.</p>
    </div>
  </section>

  <h2 class="section-title">Nos Programmes</h2>

  <!-- Formations grid -->
  <section class="formations" aria-label="Liste des formations">

    <!-- Card 1 -->
    <article class="formation-card" data-title="Maquillage Événementiel" data-dates="10-30 Nov 2025" data-location="Abidjan" data-desc="Techniques complètes pour sublimer vos clients lors de mariages." data-price="110.000 FCFA" data-oldprice="160.000 FCFA">
      <div class="ribbon"><i class="fas fa-tag" aria-hidden="true"></i><span>Promo</span></div>
      <div class="formation-banner">
        <div class="banner-icon" aria-hidden="true"><i class="fas fa-star"></i></div>
      </div>
      <div class="formation-title">Maquillage Événementiel</div>
      <div class="formation-body">
        <div class="formation-meta">
          <div class="location">Abidjan</div>
          <div class="date"><i class="fas fa-calendar-alt" aria-hidden="true"></i><span>10-30 Nov 2025</span></div>
        </div>
        <div class="formation-desc">Techniques complètes pour sublimer vos clients lors de mariages.</div>
        <div class="prices">
          <div class="price">110.000 FCFA</div>
          <div class="old-price">160.000 FCFA</div>
        </div>
        <div class="formation-cta">
          <a href="#" class="btn details-btn" role="button"><i class="fab fa-whatsapp" aria-hidden="true"></i> Détails</a>
        </div>
      </div>
    </article>

    <!-- Card 2 -->
    <article class="formation-card" data-title="Perfectionnement" data-dates="05-19 Déc 2025" data-location="Yamoussoukro" data-desc="Perfectionnez votre maquillage quotidien." data-price="50.000 FCFA" data-oldprice="70.000 FCFA">
      <div class="ribbon"><i class="fas fa-tag" aria-hidden="true"></i><span>Promo</span></div>
      <div class="formation-banner">
        <div class="banner-icon" aria-hidden="true"><i class="fas fa-heart"></i></div>
      </div>
      <div class="formation-title">Perfectionnement</div>
      <div class="formation-body">
        <div class="formation-meta">
          <div class="location">Yamoussoukro</div>
          <div class="date"><i class="fas fa-calendar-alt" aria-hidden="true"></i><span>05-19 Déc 2025</span></div>
        </div>
        <div class="formation-desc">Perfectionnez votre maquillage quotidien.</div>
        <div class="prices">
          <div class="price">50.000 FCFA</div>
          <div class="old-price">70.000 FCFA</div>
        </div>
        <div class="formation-cta">
          <a href="#" class="btn details-btn" role="button"><i class="fab fa-whatsapp" aria-hidden="true"></i> Détails</a>
        </div>
      </div>
    </article>

    <!-- Card 3 -->
    <article class="formation-card" data-title="Formation Artistique" data-dates="15-30 Jan 2026" data-location="Abidjan" data-desc="Maquillage créatif et effets spéciaux." data-price="130.000 FCFA" data-oldprice="170.000 FCFA">
      <div class="ribbon"><i class="fas fa-tag" aria-hidden="true"></i><span>Promo</span></div>
      <div class="formation-banner">
        <div class="banner-icon" aria-hidden="true"><i class="fas fa-paint-brush"></i></div>
      </div>
      <div class="formation-title">Formation Artistique</div>
      <div class="formation-body">
        <div class="formation-meta">
          <div class="location">Abidjan</div>
          <div class="date"><i class="fas fa-calendar-alt" aria-hidden="true"></i><span>15-30 Jan 2026</span></div>
        </div>
        <div class="formation-desc">Maquillage créatif et effets spéciaux.</div>
        <div class="prices">
          <div class="price">130.000 FCFA</div>
          <div class="old-price">170.000 FCFA</div>
        </div>
        <div class="formation-cta">
          <a href="#" class="btn details-btn" role="button"><i class="fab fa-whatsapp" aria-hidden="true"></i> Détails</a>
        </div>
      </div>
    </article>

    <!-- Card 4 -->
    <article class="formation-card" data-title="Makeup Studio Pro" data-dates="01-20 Fév 2026" data-location="Bouaké" data-desc="Formation complète pour maquilleurs professionnels." data-price="150.000 FCFA" data-oldprice="200.000 FCFA">
      <div class="ribbon"><i class="fas fa-tag" aria-hidden="true"></i><span>Promo</span></div>
      <div class="formation-banner">
        <div class="banner-icon" aria-hidden="true"><i class="fas fa-briefcase"></i></div>
      </div>
      <div class="formation-title">Makeup Studio Pro</div>
      <div class="formation-body">
        <div class="formation-meta">
          <div class="location">Bouaké</div>
          <div class="date"><i class="fas fa-calendar-alt" aria-hidden="true"></i><span>01-20 Fév 2026</span></div>
        </div>
        <div class="formation-desc">Formation complète pour maquilleurs professionnels.</div>
        <div class="prices">
          <div class="price">150.000 FCFA</div>
          <div class="old-price">200.000 FCFA</div>
        </div>
        <div class="formation-cta">
          <a href="#" class="btn details-btn" role="button"><i class="fab fa-whatsapp" aria-hidden="true"></i> Détails</a>
        </div>
      </div>
    </article>

    <!-- Card 5 -->
    <article class="formation-card" data-title="Masterclass Avancée" data-dates="10-25 Mar 2026" data-location="Abidjan" data-desc="Techniques avancées et professionnelles." data-price="200.000 FCFA" data-oldprice="250.000 FCFA">
      <div class="ribbon"><i class="fas fa-tag" aria-hidden="true"></i><span>Promo</span></div>
      <div class="formation-banner">
        <div class="banner-icon" aria-hidden="true"><i class="fas fa-award"></i></div>
      </div>
      <div class="formation-title">Masterclass Avancée</div>
      <div class="formation-body">
        <div class="formation-meta">
          <div class="location">Abidjan</div>
          <div class="date"><i class="fas fa-calendar-alt" aria-hidden="true"></i><span>10-25 Mar 2026</span></div>
        </div>
        <div class="formation-desc">Techniques avancées et professionnelles.</div>
        <div class="prices">
          <div class="price">200.000 FCFA</div>
          <div class="old-price">250.000 FCFA</div>
        </div>
        <div class="formation-cta">
          <a href="#" class="btn details-btn" role="button"><i class="fab fa-whatsapp" aria-hidden="true"></i> Détails</a>
        </div>
      </div>
    </article>

  </section>

  <!-- Modal (unchanged) -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-content" role="document">
      <div class="bg" aria-hidden="true"></div>
      <span class="close" id="modal-close" role="button" aria-label="Fermer la fenêtre">&times;</span>
      <div class="modal-header">
        <h2 id="modal-title">Titre</h2>
      </div>
      <div class="modal-body">
        <div class="modal-row"><span>Dates :</span> <span id="modal-dates"></span></div>
        <div class="modal-row"><span>Lieu :</span> <span id="modal-location"></span></div>
        <p class="desc" id="modal-desc"></p>
        <div class="modal-row"><span>Prix :</span> <span class="price" id="modal-price"></span></div>
        <div class="modal-row"><span>Ancien Prix :</span> <span class="old-price" id="modal-oldprice"></span></div>
      </div>

      <div class="modal-cta">
        <button id="modal-whatsapp"><i class="fab fa-whatsapp" aria-hidden="true"></i> Réserver</button>
        <button id="modal-download"><i class="fas fa-download" aria-hidden="true"></i> Télécharger</button>
      </div>

      <div class="modal-footer">
        <p>Suivez-nous :</p>
        <a href="https://facebook.com/LIAMAKEUP" aria-label="Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a>
        <a href="https://instagram.com/LIAMAKEUP" aria-label="Instagram"><i class="fab fa-instagram" aria-hidden="true"></i></a>
        <a href="https://wa.me/2250777867309" aria-label="WhatsApp"><i class="fab fa-whatsapp" aria-hidden="true"></i></a>
        <p style="margin-top:10px;">Contact : <a href="mailto:contact@liamakeup.ci">contact@liamakeup.ci</a></p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer role="contentinfo" id="contact">
    <h3>LIAMAKEUP</h3>
    <div class="site-social">
      <a href="https://facebook.com/LIAMAKEUP" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook"></i></a>
      <a href="https://instagram.com/LIAMAKEUP" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
      <a href="https://wa.me/2250777867309" target="_blank" rel="noopener noreferrer"><i class="fab fa-whatsapp"></i></a>
    </div>
    <p>&copy; 2025 LIAMAKEUP. Tous droits réservés.</p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    /* Fix mobile 100vh */
    (function(){
      function setVh(){ document.documentElement.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px'); }
      setVh();
      window.addEventListener('resize', setVh);
    })();

    /* Mobile nav toggle */
    (function(){
      const toggle = document.getElementById('navToggle');
      const nav = document.getElementById('mainNav');
      if(!toggle || !nav) return;

      function openUI(){
        nav.classList.add('open');
        toggle.setAttribute('aria-expanded','true');
        toggle.innerHTML = '<i class="fas fa-times" aria-hidden="true"></i>';
        document.body.style.overflow = 'hidden';
        const first = nav.querySelector('a');
        first && first.focus();
      }
      function closeUI(){
        nav.classList.remove('open');
        toggle.setAttribute('aria-expanded','false');
        toggle.innerHTML = '<i class="fas fa-bars" aria-hidden="true"></i>';
        document.body.style.overflow = '';
        toggle.focus();
      }

      toggle.addEventListener('click', (e) => { e.stopPropagation(); if(nav.classList.contains('open')) closeUI(); else openUI(); });
      nav.addEventListener('click', (e) => { const a = e.target.closest && e.target.closest('a'); if(a){ closeUI(); } });
      document.addEventListener('click', (e) => { if(nav.classList.contains('open') && !nav.contains(e.target) && !toggle.contains(e.target)){ closeUI(); } });
      document.addEventListener('keydown', (e) => { if(e.key === 'Escape' && nav.classList.contains('open')) closeUI(); });
    })();

    /* Active link helper */
    (function(){
      const links = document.querySelectorAll('#mainNav a');
      function updateActive(){
        const path = location.pathname.split('/').pop() || 'index.html';
        links.forEach(a=>{
          const href = a.getAttribute('href');
          if(!href) return;
          const hName = href.split('/').pop() || 'index.html';
          if(hName === path){ a.classList.add('active'); a.setAttribute('aria-current','page'); } else { a.classList.remove('active'); a.removeAttribute('aria-current'); }
        });
      }
      updateActive();
      window.addEventListener('popstate', updateActive);
    })();

    /* Modal logic for formation cards */
    (function(){
      const modal = document.getElementById('modal');
      const modalClose = document.getElementById('modal-close');
      const cards = document.querySelectorAll('.formation-card');
      const btnWhats = document.getElementById('modal-whatsapp');
      const btnDownload = document.getElementById('modal-download');

      function openModal() {
        modal.classList.add('show');
        modal.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
      }
      function closeModal() {
        modal.classList.remove('show');
        modal.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
      }

      cards.forEach(card=>{
        card.addEventListener('click', (e)=>{
          const target = e.target;
          if(target.tagName === 'A' && !target.classList.contains('details-btn')) return;
          populateAndOpen(card);
        });

        const btn = card.querySelector('.details-btn');
        if(btn){
          btn.addEventListener('click', (e)=>{ e.preventDefault(); e.stopPropagation(); populateAndOpen(card); });
        }
      });

      function populateAndOpen(card){
        document.getElementById('modal-title').textContent = card.dataset.title || '';
        document.getElementById('modal-dates').textContent = card.dataset.dates || '';
        document.getElementById('modal-location').textContent = card.dataset.location || '';
        document.getElementById('modal-desc').textContent = card.dataset.desc || '';
        document.getElementById('modal-price').textContent = card.dataset.price || '';
        document.getElementById('modal-oldprice').textContent = card.dataset.oldprice || '';

        btnWhats.onclick = ()=>{ const text = "Bonjour, je veux réserver la formation " + (card.dataset.title || ''); window.open("https://wa.me/2250777867309?text="+encodeURIComponent(text), '_blank'); };

        btnDownload && (btnDownload.onclick = function(){
          const modalContent = document.querySelector('.modal-content').cloneNode(true);
          const closeBtn = modalContent.querySelector('.close'); if(closeBtn) closeBtn.remove();
          const bg = modalContent.querySelector('.bg'); if(bg) bg.remove();
          const header = modalContent.querySelector('.modal-header h2');
          if(header) header.textContent = "Avis de préinscription - " + header.textContent;
          html2pdf().set({
            margin: 10,
            filename: (header ? header.textContent.trim() : 'fiche') + '.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, useCORS: true },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
          }).from(modalContent).save();
        });

        openModal();
      }

      modalClose && modalClose.addEventListener('click', closeModal);
      modal.addEventListener('click', function(e){ if(e.target === modal) closeModal(); });
      document.addEventListener('keydown', function(e){ if(e.key === 'Escape' && modal.classList.contains('show')) closeModal(); });
    })();
  </script>
</body>
</html>
